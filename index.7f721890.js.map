{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,SCAME,EAAc,UACdC,EAAY,QACLC,EAIJC,KAAKC,MAAMC,aAAaC,QAAQN,KAJW,GACvCO,EAOJJ,KAAKC,MAAMC,aAAaC,QAAQL,KAPO,GCIzC,SAASO,EAAeC,GDMxB,IAAiCC,GCHtCC,QAAQC,IAAI,iBAAkBH,GAC1BP,EAAQW,SAASJ,MAIrBP,EAAQY,KAAKL,GDFyBC,ECGdR,EDFxBG,aAAaU,QAAQf,EAAaG,KAAKa,UAAUN,I,CCM5C,SAASO,EAAaR,GDHtB,IAA+BC,GCIpCC,QAAQC,IAAI,iBAAkBH,GAC1BF,EAAMM,SAASJ,MAGnBF,EAAMO,KAAKL,GDRyBC,ECSdH,EDRtBF,aAAaU,QAAQd,EAAWE,KAAKa,UAAUN,I,CDb1C,SAASQ,EAAcT,GAC5B,IAAMU,EAAWC,SAASC,cAAc,iBAC3B,EAAAtB,EAAAuB,cAAab,GAAIc,MAAK,SAAAC,G,IA6C5BC,EA5CLd,QAAQC,IAAIY,GACZ,IAyEeE,EAzETC,EAAS,6EAQcC,OANWJ,EAAKK,YAAY,kHAwBnBD,OAlBTJ,EAAKM,MAAM,0qBAmBtCF,OADoCJ,EAAKO,aAAaC,QAAQ,GAAG,MAK7BJ,OAJpCJ,EAAKS,WACN,4GAMqCL,OAHAJ,EAAKU,WAAWF,QAAQ,GAAG,4GAM3BJ,OAHAJ,EAAKM,MAAM,4GAS5CF,QA8BUF,EApCiCF,EAAKW,OAqChDT,EAAYU,KAAI,SAAAC,G,OAAQA,EAAKC,I,IAAMC,KAAK,OArCgB,+IAMjCX,OAAV,QAAbH,EAAAD,EAAKgB,gBAAQ,IAAbf,IAAiB,MAAM,oYAgB5BN,EAASsB,UAAYd,EAErB,IAAMe,EAAgBtB,SAASC,cAAc,2BACvCsB,EAAcvB,SAASC,cAAc,yBAE3CqB,EAAcE,iBAAiB,SAAS,WACtCpC,EAAeC,E,IAEjBkC,EAAYC,iBAAiB,SAAS,WACpC3B,EAAaR,E,ODxDnB,SAASoC,IACPzB,SAAS0B,KAAKC,UAAUC,OAAO,aAAc,a,CAS/C,SAASC,EAAcC,GACF,WAAfA,EAAMC,OAIVC,OAAOC,oBAAoB,UAAWJ,GACtCJ,I,CAlCFhD,EAAAyD,QAAKC,QAAQX,iBAAiB,SAI9B,SAAqBM,GAEnB,IADkBA,EAAMM,OAAOT,UAAUU,SAAS,gBAEhD,OAGF9C,QAAQC,IAAIsC,EAAMM,OAAOE,QAAQC,OAEjCzC,EADWgC,EAAMM,OAAOE,QAAQC,OAGhCvC,SAAS0B,KAAKC,UAAUa,IAAI,aAAc,cAC1CR,OAAOR,iBAAiB,UAAWK,E,IAdrCpD,EAAAyD,QAAKO,cAAcjB,iBAAiB,QAASC,GAC7ChD,EAAAyD,QAAKQ,YAAYlB,iBAAiB,SAoBlC,SAAyBM,GACnBA,EAAMa,gBAAkBb,EAAMM,QAChCX,G","sources":["src/js/open-and-close-modal.js","src/js/loading-into-modal.js","src/js/local-storage.js","src/js/add-to-watched&queue.js"],"sourcesContent":["import refs from './refs';\nimport { loadIntoModal } from './loading-into-modal';\n\nrefs.gallery.addEventListener('click', onOpenModal);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.divBackdrop.addEventListener('click', onBackDropClick);\n\nfunction onOpenModal(event) {\n  const isImageEl = event.target.classList.contains('movie__image');\n  if (!isImageEl) {\n    return;\n  }\n\n  console.log(event.target.dataset.movie);\n  const id = event.target.dataset.movie;\n  loadIntoModal(id);\n\n  document.body.classList.add('show-modal', 'modal-open');\n  window.addEventListener('keydown', onEscKeyPress);\n}\n\nfunction onCloseModal() {\n  document.body.classList.remove('show-modal', 'modal-open');\n}\n\nfunction onBackDropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModal();\n  }\n}\n\nfunction onEscKeyPress(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n\n  window.removeEventListener('keydown', onEscKeyPress);\n  onCloseModal();\n}\n","import { getInfoMovie } from './api';\nimport { onAddToWatched, onAddToQueue } from './add-to-watched&queue';\n\n// loadIntoModal(12);\n\nexport function loadIntoModal(id) {\n  const modalRef = document.querySelector('.modal__wrap');\n  const film = getInfoMovie(id).then(data => {\n    console.log(data);\n    const markup = `<img\n      class=\"modal__img\"\n      src=\"https://image.tmdb.org/t/p/w500${data.poster_path}\"\n      alt=\"\"\n      width=\"240px\"\n      height=\"357px\"\n    />\n    <div>\n      <h2 class=\"modal__title\">${data.title}</h2>\n      <div class=\"modal__list-box\">\n        <ul class=\"modal__list list\">\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Vote/Votes </p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Popularity</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Original Title</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Genre</p>\n          </li>\n        </ul>\n        <ul class=\"modal__list list\">\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${data.vote_average.toFixed(1)} /${\n      data.vote_count\n    }</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${data.popularity.toFixed(1)}</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${data.title}</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${getGenres(data.genres)}</p>\n          </li>\n        </ul>\n      </div>\n      <h3 class=\"modal__subtitle\">ABOUT</h3>\n      <p class=\"modal__descrpt\">\n       ${data.overview ?? '---'}\n      </p>\n      <ul class=\"modal__btn-list list\">\n        <li>\n          <button type=\"button\" class=\"modal__btn\" data-btn=\"addToWatched\">\n            add to Watched\n          </button>\n        </li>\n        <li>\n          <button type=\"button\" class=\"modal__btn\" data-btn=\"addToQueue\">\n            add to queue\n          </button>\n        </li>\n      </ul>\n    </div>`;\n\n    modalRef.innerHTML = markup;\n\n    const addWatchedRef = document.querySelector('[data-btn=addToWatched]');\n    const addQueueRef = document.querySelector('[data-btn=addToQueue]');\n\n    addWatchedRef.addEventListener('click', () => {\n      onAddToWatched(id);\n    });\n    addQueueRef.addEventListener('click', () => {\n      onAddToQueue(id);\n    });\n  });\n}\n\nfunction getGenres(arrOfGenres) {\n  return arrOfGenres.map(genr => genr.name).join(', ');\n}\n","const KEY_WATCHED = 'watched';\nconst KEY_QUEUE = 'queue';\nexport const watched = getWatchedLocalStoradge() || [];\nexport const queue = getQueueLocalStoradge() || [];\n\nexport function getWatchedLocalStoradge() {\n  return JSON.parse(localStorage.getItem(KEY_WATCHED));\n}\n\nexport function getQueueLocalStoradge() {\n  return JSON.parse(localStorage.getItem(KEY_QUEUE));\n}\n\nexport function setWatchedLocalStoradge(arr) {\n  localStorage.setItem(KEY_WATCHED, JSON.stringify(arr));\n}\n\nexport function setQueueLocalStoradge(arr) {\n  localStorage.setItem(KEY_QUEUE, JSON.stringify(arr));\n}\n","import {\n  watched,\n  queue,\n  setWatchedLocalStoradge,\n  setQueueLocalStoradge,\n} from './local-storage';\n\nexport function onAddToWatched(id) {\n  // evt.preventDefault();\n\n  console.log('add to watch: ', id);\n  if (watched.includes(id)) {\n    return;\n  }\n\n  watched.push(id);\n  setWatchedLocalStoradge(watched);\n  // console.log(watched);\n}\n\nexport function onAddToQueue(id) {\n  console.log('add to Queue: ', id);\n  if (queue.includes(id)) {\n    return;\n  }\n  queue.push(id);\n  setQueueLocalStoradge(queue);\n}\n"],"names":["$4Nugj","parcelRequire","$b7ONl","$3791646d3ae2cee8$var$KEY_WATCHED","$3791646d3ae2cee8$var$KEY_QUEUE","$3791646d3ae2cee8$export$e330b7faa493c08b","JSON","parse","localStorage","getItem","$3791646d3ae2cee8$export$4f7fa46ff53e516f","$73a4fd91c3e5350c$export$8365ca842e8c6100","id","arr","console","log","includes","push","setItem","stringify","$73a4fd91c3e5350c$export$f1fef8fa31d6cdf5","$e7314897528f87a4$export$de4b13aa6582d63d","modalRef","document","querySelector","getInfoMovie","then","data","_overview","arrOfGenres","markup","concat","poster_path","title","vote_average","toFixed","vote_count","popularity","genres","map","genr","name","join","overview","innerHTML","addWatchedRef","addQueueRef","addEventListener","$09a933b02c7f1545$var$onCloseModal","body","classList","remove","$09a933b02c7f1545$var$onEscKeyPress","event","code","window","removeEventListener","default","gallery","target","contains","dataset","movie","add","closeModalBtn","divBackdrop","currentTarget"],"version":3,"file":"index.7f721890.js.map"}