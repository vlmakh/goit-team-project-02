{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,SCAA,MAEaE,EAIJC,KAAKC,MAAMC,aAAaC,QANb,aAEgC,GACvCC,EAOJJ,KAAKC,MAAMC,aAAaC,QATf,WAE8B,GCIzC,SAASE,EAAeC,EAAKC,GDM7B,IAAiCC,GCHtCC,QAAQC,IAAI,sBACRX,EAAQY,SAASJ,MAIrBR,EAAQa,KAAKL,GDFyBC,ECGdT,EDFxBG,aAAaW,QAdK,UAcgBb,KAAKc,UAAUN,I,CCM5C,SAASO,EAAaT,EAAKC,GDH3B,IAA+BC,GCIpCC,QAAQC,IAAI,qBACRN,EAAMO,SAASJ,MAGnBH,EAAMQ,KAAKL,GDRyBC,ECSdJ,EDRtBF,aAAaW,QAjBG,QAiBgBb,KAAKc,UAAUN,I,CDb1C,SAASQ,EAAcT,GAC5B,MAAMU,EAAWC,SAASC,cAAc,iBAC3B,EAAArB,EAAAsB,cAAab,GAAIc,MAAKC,IACjCb,QAAQC,IAAIY,GACZ,MAAMC,EAAS,6EAEyBD,EAAKE,4HAMhBF,EAAKG,8qBAkBIH,EAAKI,aAAaC,QAAQ,OAC9DL,EAAKM,qHAI+BN,EAAKO,WAAWF,QAAQ,6GAGxBL,EAAKG,gHAoC5BK,EAjCiCR,EAAKS,OAkChDD,EAAYE,KAAIC,GAAQA,EAAKC,OAAMC,KAAK,mJA5BxCb,EAAKc,UAAY,wYA2B1B,IAAmBN,EAXfb,EAASoB,UAAYd,EAErB,MAAMe,EAAgBpB,SAASC,cAAc,2BACvCoB,EAAcrB,SAASC,cAAc,yBAG3CmB,EAAcE,iBAAiB,QAASnC,GACxCkC,EAAYC,iBAAiB,QAASzB,EAAa,G,CDtDvD,SAAS0B,IACPvB,SAASwB,KAAKC,UAAUC,OAAO,aAAc,a,CAS/C,SAASC,EAAcC,GACF,WAAfA,EAAMC,OAIVC,OAAOC,oBAAoB,UAAWJ,GACtCJ,I,CAlCF7C,EAAAsD,QAAKC,QAAQX,iBAAiB,SAI9B,SAAqBM,GAEnB,IADkBA,EAAMM,OAAOT,UAAUU,SAAS,gBAEhD,OAGF5C,QAAQC,IAAIoC,EAAMM,OAAOE,QAAQC,OAEjCvC,EADW8B,EAAMM,OAAOE,QAAQC,OAGhCrC,SAASwB,KAAKC,UAAUa,IAAI,aAAc,cAC1CR,OAAOR,iBAAiB,UAAWK,E,IAdrCjD,EAAAsD,QAAKO,cAAcjB,iBAAiB,QAASC,GAC7C7C,EAAAsD,QAAKQ,YAAYlB,iBAAiB,SAoBlC,SAAyBM,GACnBA,EAAMa,gBAAkBb,EAAMM,QAChCX,G","sources":["src/js/open-and-close-modal.js","src/js/loading-into-modal.js","src/js/local-storage.js","src/js/add-to-watched&queue.js"],"sourcesContent":["import refs from './refs';\nimport { loadIntoModal } from './loading-into-modal';\n\nrefs.gallery.addEventListener('click', onOpenModal);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.divBackdrop.addEventListener('click', onBackDropClick);\n\nfunction onOpenModal(event) {\n  const isImageEl = event.target.classList.contains('movie__image');\n  if (!isImageEl) {\n    return;\n  }\n\n  console.log(event.target.dataset.movie);\n  const id = event.target.dataset.movie;\n  loadIntoModal(id);\n\n  document.body.classList.add('show-modal', 'modal-open');\n  window.addEventListener('keydown', onEscKeyPress);\n}\n\nfunction onCloseModal() {\n  document.body.classList.remove('show-modal', 'modal-open');\n}\n\nfunction onBackDropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModal();\n  }\n}\n\nfunction onEscKeyPress(event) {\n  if (event.code !== 'Escape') {\n    return;\n  }\n\n  window.removeEventListener('keydown', onEscKeyPress);\n  onCloseModal();\n}\n","import { getInfoMovie } from './api';\nimport { onAddToWatched, onAddToQueue } from './add-to-watched&queue';\n\n// loadIntoModal(12);\n\nexport function loadIntoModal(id) {\n  const modalRef = document.querySelector('.modal__wrap');\n  const film = getInfoMovie(id).then(data => {\n    console.log(data);\n    const markup = `<img\n      class=\"modal__img\"\n      src=\"https://image.tmdb.org/t/p/w500${data.poster_path}\"\n      alt=\"\"\n      width=\"240px\"\n      height=\"357px\"\n    />\n    <div>\n      <h2 class=\"modal__title\">${data.title}</h2>\n      <div class=\"modal__list-box\">\n        <ul class=\"modal__list list\">\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Vote/Votes </p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Popularity</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Original Title</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-rigth\">Genre</p>\n          </li>\n        </ul>\n        <ul class=\"modal__list list\">\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${data.vote_average.toFixed(1)} /${\n      data.vote_count\n    }</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${data.popularity.toFixed(1)}</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${data.title}</p>\n          </li>\n          <li class=\"modal__list-item\">\n            <p class=\"modal__list-left\">${getGenres(data.genres)}</p>\n          </li>\n        </ul>\n      </div>\n      <h3 class=\"modal__subtitle\">ABOUT</h3>\n      <p class=\"modal__descrpt\">\n       ${data.overview ?? '---'}\n      </p>\n      <ul class=\"modal__btn-list list\">\n        <li>\n          <button type=\"button\" class=\"modal__btn\" data-btn=\"addToWatched\">\n            add to Watched\n          </button>\n        </li>\n        <li>\n          <button type=\"button\" class=\"modal__btn\" data-btn=\"addToQueue\">\n            add to queue\n          </button>\n        </li>\n      </ul>\n    </div>`;\n\n    modalRef.innerHTML = markup;\n\n    const addWatchedRef = document.querySelector('[data-btn=addToWatched]');\n    const addQueueRef = document.querySelector('[data-btn=addToQueue]');\n    // if (watched.includes(id)) addWatchedRef.setAttribute('disabled', true);\n    //  if (queue.includes(id)) addQueueRef.setAttribute('disable', true);\n    addWatchedRef.addEventListener('click', onAddToWatched);\n    addQueueRef.addEventListener('click', onAddToQueue);\n  });\n}\n\nfunction getGenres(arrOfGenres) {\n  return arrOfGenres.map(genr => genr.name).join(', ');\n}\n","const KEY_WATCHED = 'watched';\nconst KEY_QUEUE = 'queue';\nexport const watched = getWatchedLocalStoradge() || [];\nexport const queue = getQueueLocalStoradge() || [];\n\nexport function getWatchedLocalStoradge() {\n  return JSON.parse(localStorage.getItem(KEY_WATCHED));\n}\n\nexport function getQueueLocalStoradge() {\n  return JSON.parse(localStorage.getItem(KEY_QUEUE));\n}\n\nexport function setWatchedLocalStoradge(arr) {\n  localStorage.setItem(KEY_WATCHED, JSON.stringify(arr));\n}\n\nexport function setQueueLocalStoradge(arr) {\n  localStorage.setItem(KEY_QUEUE, JSON.stringify(arr));\n}\n","import {\n  watched,\n  queue,\n  setWatchedLocalStoradge,\n  setQueueLocalStoradge,\n} from './local-storage';\n\nexport function onAddToWatched(evt, id) {\n  // evt.preventDefault();\n\n  console.log('ddWatchedRef click');\n  if (watched.includes(id)) {\n    return;\n  }\n\n  watched.push(id);\n  setWatchedLocalStoradge(watched);\n  // console.log(watched);\n}\n\nexport function onAddToQueue(evt, id) {\n  console.log('addQueueRef click');\n  if (queue.includes(id)) {\n    return;\n  }\n  queue.push(id);\n  setQueueLocalStoradge(queue);\n}\n"],"names":["$krGWQ","parcelRequire","$7rYDH","$8125d1701b78b442$export$e330b7faa493c08b","JSON","parse","localStorage","getItem","$8125d1701b78b442$export$4f7fa46ff53e516f","$c143d358a24b828c$export$8365ca842e8c6100","evt","id","arr","console","log","includes","push","setItem","stringify","$c143d358a24b828c$export$f1fef8fa31d6cdf5","$464bbe8c76c3bd9a$export$de4b13aa6582d63d","modalRef","document","querySelector","getInfoMovie","then","data","markup","poster_path","title","vote_average","toFixed","vote_count","popularity","arrOfGenres","genres","map","genr","name","join","overview","innerHTML","addWatchedRef","addQueueRef","addEventListener","$021845d28981a6a0$var$onCloseModal","body","classList","remove","$021845d28981a6a0$var$onEscKeyPress","event","code","window","removeEventListener","default","gallery","target","contains","dataset","movie","add","closeModalBtn","divBackdrop","currentTarget"],"version":3,"file":"index.cb96e8f4.js.map"}