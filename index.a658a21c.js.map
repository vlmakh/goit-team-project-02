{"mappings":"gfAAA,IAOIA,EAPJC,EAAAC,EAAA,S,oDAMAD,EAAAE,QAAKC,KAAKC,iBAAiB,UAG3B,SAA2BC,GACzBA,EAAEC,iBACFP,EAAQM,EAAEE,OAAOC,YAAYC,MAAMC,OAGnC,GADAV,EAAAE,QAAKS,YAAYC,YAAc,GACjB,KAAVb,EAOF,OANAc,YAAW,WACTb,EAAAE,QAAKS,YAAYG,UAAUC,IAAI,Y,GAC9B,KACHf,EAAAE,QAAKS,YAAYG,UAAUE,OAAO,kBAClChB,EAAAE,QAAKS,YAAYC,YACf,uDAGJZ,EAAAE,QAAKe,OAAOC,MAAMC,QAAU,SAC5B,EAAAC,EAAAC,cAAatB,EAZF,GAaRuB,MAAK,SAAAC,GAEJ,GADAvB,EAAAE,QAAKe,OAAOC,MAAMC,QAAU,OACD,IAAvBI,EAAKC,cAOP,OANAX,YAAW,WACTb,EAAAE,QAAKS,YAAYG,UAAUC,IAAI,Y,GAC9B,KACHf,EAAAE,QAAKS,YAAYG,UAAUE,OAAO,kBAClChB,EAAAE,QAAKS,YAAYC,YACf,8DAGJa,QAAQC,IAAIH,GACZvB,EAAAE,QAAKyB,QAAQC,WAAY,EAAAC,EAAAC,qBAAoBP,EAAKQ,UAE/B,EAAAC,EAAAC,kBAAiBV,EAAKC,cAAeD,EAAKW,aAClDC,GAAG,cAAc,SAAAC,G,IAAGC,EAAID,EAAJC,MAC7B,EAAAjB,EAAAC,cAAatB,EAAOsC,GAAMf,MAAK,SAAAgB,GAC7BtC,EAAAE,QAAKyB,QAAQC,WAAY,EAAAC,EAAAC,qBAAoBQ,EAAKP,UAClD,EAAAQ,EAAAC,c,UAILC,OAAM,SAAAC,G,OAASjB,QAAQC,IAAIgB,E","sources":["src/js/search-by-keyword.js"],"sourcesContent":["import refs from './refs';\nimport { getByKeyword } from './api';\nimport { createGalleryMarkup } from './create-gallery-markup';\nimport { createPagination } from './pagination';\nimport { scrollOnTop } from './scroll-on-top';\n\nrefs.form.addEventListener('submit', onSearchByKeyword);\nlet query;\n\nfunction onSearchByKeyword(e) {\n  e.preventDefault();\n  query = e.target.searchQuery.value.trim();\n  let page = 1;\n  refs.formWarning.textContent = '';\n  if (query === '') {\n    setTimeout(() => {\n      refs.formWarning.classList.add('is-hidden');\n    }, 5000);\n    refs.formWarning.classList.remove('is-hidden');\n    refs.formWarning.textContent =\n      'Search query is empty. Enter the correct movie name';\n    return;\n  }\n  refs.loader.style.display = 'block';\n  getByKeyword(query, page)\n    .then(data => {\n      refs.loader.style.display = 'none';\n      if (data.total_results === 0) {\n        setTimeout(() => {\n          refs.formWarning.classList.add('is-hidden');\n        }, 5000);\n        refs.formWarning.classList.remove('is-hidden');\n        refs.formWarning.textContent =\n          'Search result not successful. Enter the correct movie name';\n        return;\n      }\n      console.log(data);\n      refs.gallery.innerHTML = createGalleryMarkup(data.results);\n\n      const pagination = createPagination(data.total_results, data.total_pages);\n      pagination.on('beforeMove', ({ page }) => {\n        getByKeyword(query, page).then(data => {\n          refs.gallery.innerHTML = createGalleryMarkup(data.results);\n          scrollOnTop();\n        });\n      });\n    })\n    .catch(error => console.log(error));\n}\n"],"names":["$ffc2dcc44f21eabb$var$query","$4Nugj","parcelRequire","default","form","addEventListener","e","preventDefault","target","searchQuery","value","trim","formWarning","textContent","setTimeout","classList","add","remove","loader","style","display","$b7ONl","getByKeyword","then","data1","total_results","console","log","gallery","innerHTML","$ewciJ","createGalleryMarkup","results","$jcFG7","createPagination","total_pages","on","param","page","data","$5KYCv","scrollOnTop","catch","error"],"version":3,"file":"index.a658a21c.js.map"}